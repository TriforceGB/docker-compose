name: gluetun
services:
  gluetun:
    container_name: gluetun
    image: qmcgaw/gluetun:latest
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun:/dev/net/tun
    environment:
      VPN_SERVICE_PROVIDER: privado
      OPENVPN_USER: ${PRIVADO_USER}
      OPENVPN_PASSWORD: ${PRIVADO_PASSWORD}
      SERVER_COUNTRIES: ${PRIVADO_COUNTRY}
    labels:
      traefik.enable: true
      traefik.http.routers.sabnzbd.rule: Host("sabnzbd.${URL}")
      traefik.http.services.sabnzbd.loadbalancer.server.port: 9090
      traefik.http.routers.sabnzbd.middlewares: authentik@file
      glance.name: Gluetun
      glance.icon: di:gluetun
      glance.url: https://code.privado.dev/
      glance.description: VPN Client for Container
      glance.category: gluetun
    networks:
      - gluetun
  sabnzbd:
    container_name: sabnzbd
    image: lscr.io/linuxserver/sabnzbd:latest
    restart: unless-stopped
    network_mode: service:gluetun
    # depends_on:
    #   - gluetun
    volumes:
      - ${DOCKERFOLDER}/Sabnzbd/Config:/config
      - ${DOCKERFOLDER}/Sabnzbd/Downloads:/downloads
    environment:
      PUID: 1000
      PGID: 1000
      TZ: Etc/UTC
      WEBUI_PORT: 9090
    labels:
      glance.name: Sabnzbd
      glance.icon: di:sabnzbd
      glance.url: https://sabnzbd.${URL}
      glance.description: NZB Downloader
      glance.parent: gluetun
  radarr:
    container_name: radarr
    image: lscr.io/linuxserver/radarr:latest
    restart: unless-stopped
    network_mode: service:gluetun
    depends_on:
      - gluetun
    environment:
      PUID: 1000
      PGID: 1000
      TZ: Etc/UTC
      WEBUI_PORT: 7878
    volumes:
      - ${DOCKERFOLDER}/Radarr/Config:/config
      - ${MEDIAFOLDER}/movies:/movies
      - ${MEDIAFOLDER}/anime/movies:/anime
      - ${MEDIAFOLDER}/downloads:/downloads
    labels:
      traefik.enable: true
      traefik.http.routers.radarr.rule: Host("radarr.schultzserver.ca")
      traefik.http.services.radarr.loadbalancer.server.port: 7878
      traefik.http.routers.radarr.middlewares: authentik@file
      glance.name: Radarr
      glance.icon: di:radarr
      glance.url: https://radarr.${URL}
      glance.description: Movie Manager
      glance.parent: gluetun
  sonarr:
    container_name: sonarr
    image: lscr.io/linuxserver/sonarr:latest
    restart: unless-stopped
    network_mode: service:gluetun
    # depends_on:
    #   - gluetun
    volumes:
      - ${DOCKERFOLDER}/Sonarr/Config:/config
      - ${MEDIAFOLDER}/shows:/shows
      - ${MEDIAFOLDER}/anime/shows:/anime
      - ${MEDIAFOLDER}/downloads:/downloads
    environment:
      PUID: 1000
      PGID: 1000
      TZ: Etc/UTC
      WEBUI_PORT: 8989
    labels:
      traefik.enable: true
      traefik.http.routers.sonarr.rule: Host("sonarr.schultzserver.ca")
      traefik.http.services.sonarr.loadbalancer.server.port: 8989
      traefik.http.routers.sonarr.middlewares: authentik@file
      glance.name: Sonarr
      glance.icon: di:sonarr
      glance.url: https://sonarr.${URL}
      glance.description: Show Manager
      glance.parent: gluetun
  prowlarr:
    container_name: prowlarr
    image: lscr.io/linuxserver/prowlarr:latest
    restart: unless-stopped
    network_mode: service:gluetun
    # depends_on:
    #   - gluetun
    volumes:
      - ${DOCKERFOLDER}/Prowlarr/Config:/config
    environment:
      PUID: 1000
      PGID: 1000
      TZ: Etc/UTC
      WEBUI_PORT: 9696
    labels:
      traefik.enable: true
      traefik.http.routers.prowlarr.rule: Host("prowlarr.schultzserver.ca")
      traefik.http.services.prowlarr.loadbalancer.server.port: 9696
      traefik.http.routers.prowlarr.middlewares: authentik@file
      glance.name: Prowlarr
      glance.icon: di:prowlarr
      glance.url: https://prowlarr.${URL}
      glance.description: Source Manager
      glance.parent: gluetun
networks:
  gluetun:
    external: true
